<div class="w-full px-4 py-6">
  <h1 class="text-2xl font-semibold mb-6">Categories</h1>

  <div class="flex flex-wrap gap-4 mb-14">
    <button
      (click)="openCategoryModal(null)"
      class="flex items-center gap-2 px-5 py-2 rounded-lg bg-accent-blue/90 hover:bg-accent-blue text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-accent-blue/50"
    >
      <i class="fa-solid fa-circle-plus"></i>
      Category
    </button>
  </div>

  <!-- Card -->
  <!-- Desktop table -->
  <div
    class="hidden md:block bg-card border border-border rounded-lg shadow-sm p-4"
  >
    <div class="overflow-x-auto">
      <table class="min-w-full border-collapse">
        <thead>
          <tr class="border-b text-left text-sm font-medium text-slate-400">
            <th class="px-4 py-3">Name</th>
            <th class="px-4 py-3 text-center">Actions</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-border text-sm">
          @for (category of categories(); track category.id) {
          <tr class="hover:bg-secondary transition-colors">
            <td class="px-4 py-3">{{ category.name }}</td>

            <td class="px-4 py-3">
              <div class="flex justify-center gap-3">
                <i
                  (click)="openCategoryModal(category)"
                  class="fa-solid fa-pen-to-square text-accent-blue cursor-pointer"
                ></i>

                <i
                  (click)="deleteCategory(category)"
                  class="fa-solid fa-trash text-accent-red cursor-pointer"
                ></i>
              </div>
            </td>
          </tr>
          }
        </tbody>
      </table>
      <div class="w-full px-4 py-6">
        <app-pagination
          [page]="paginationState.currentPage()"
          [size]="paginationState.pageSize()"
          [totalElements]="paginationState.totalElements()"
          [totalPages]="paginationState.totalPages()"
          (changePage)="onPageChange($event)"
        ></app-pagination>
      </div>
    </div>
  </div>
  <!-- Mobile cards -->
  <div class="md:hidden space-y-3">
    @for (category of categories(); track category.id) {
    <div
      class="bg-card border border-border rounded-lg p-4 flex justify-between items-start gap-4"
    >
      <div class="min-w-0">
        <p class="text-sm font-medium truncate">{{ category.name }}</p>
      </div>

      <div class="flex flex-col gap-3 shrink-0">
        <i
          (click)="openCategoryModal(category)"
          class="fa-solid fa-pen-to-square text-accent-blue cursor-pointer text-lg"
        ></i>

        <i
          (click)="deleteCategory(category)"
          class="fa-solid fa-trash text-accent-red cursor-pointer text-lg"
        ></i>
      </div>
    </div>
    }
    <div class="w-full px-4 py-6">
      <app-pagination
        [page]="paginationState.currentPage()"
        [size]="paginationState.pageSize()"
        [totalElements]="paginationState.totalElements()"
        [totalPages]="paginationState.totalPages()"
        (changePage)="onPageChange($event)"
      ></app-pagination>
    </div>
  </div>
</div>

@if(isModalCategoryOpen()) {
<app-edit-category
  (submitEvent)="onCategorySaved()"
  [category]="selectedCategory()"
></app-edit-category>
}
