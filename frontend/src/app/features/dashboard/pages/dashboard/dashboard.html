<div class="space-y-6">
  <!-- Filters -->
  <div class="space-y-6">
    <!-- Filters -->
    <div class="p-4 rounded-xl border border-border bg-card">
      <form
        [formGroup]="filterForm"
        (ngSubmit)="applyFilters()"
        class="space-y-4"
      >
        <div class="grid grid-cols-1 md:grid-cols-6 gap-4 items-end">
          <!-- Date from -->
          <div>
            <label class="block text-sm text-slate-300 mb-1">From</label>
            <input
              type="date"
              formControlName="dateFrom"
              class="w-full rounded-lg bg-card border border-border px-3 py-2 text-white"
            />
          </div>

          <!-- Date to -->
          <div>
            <label class="block text-sm text-slate-300 mb-1">To</label>
            <input
              type="date"
              formControlName="dateTo"
              class="w-full rounded-lg bg-card border border-border px-3 py-2 text-white"
            />
          </div>

          <!-- Account          <app-multiselect
            label="Account"
            [options]="accounts"
            labelField="value"
            valueField="id"
            placeholder="Select account..."
            (selectedChange)="onAccountsSelected($event)"
          ></app-multiselect>
 -->

          <!-- Apply -->
          <div>
            <button
              type="submit"
              class="w-full bg-accent-green text-black rounded-lg px-3 py-2 text-sm font-medium hover:opacity-90"
            >
              Apply
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- KPIs + Chart -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
    <!-- Chart -->
    <div class="bg-card rounded-xl p-5 border border-border">
      <h3 class="text-base font-medium mb-3">Expenses by Category</h3>
      <div class="h-64">
        <canvas id="expensePie"></canvas>
      </div>
    </div>

    <!-- KPIs column -->
    <div class="flex flex-col gap-4">
      <div class="bg-card rounded-xl p-5 border border-border">
        <p class="text-slate-400 text-sm">Total Balance</p>
        <p
          class="text-2xl font-semibold"
          [ngClass]="{
          'text-accent-green': (dashboardData()?.totalBalance ?? 0) >= 0,
          'text-accent-red':   (dashboardData()?.totalBalance ?? 0) < 0
        }"
        >
          {{ dashboardData()?.totalBalance ?? 0 }}
        </p>
      </div>

      <div class="bg-card rounded-xl p-5 border border-border">
        <p class="text-slate-400 text-sm">Expenses</p>
        <p class="text-2xl font-semibold text-accent-red">
          {{ dashboardData()?.expense }}
        </p>
      </div>

      <div class="bg-card rounded-xl p-5 border border-border">
        <p class="text-slate-400 text-sm">Income</p>
        <p class="text-2xl font-semibold text-accent-green">
          {{ dashboardData()?.income }}
        </p>
      </div>
    </div>
  </div>

  <!-- Last moves (full width, abajo de todo) -->
  <div class="bg-card rounded-xl p-5 border border-border">
    <last-moves></last-moves>
  </div>

  <app-expenses-income-each-month></app-expenses-income-each-month>
</div>
